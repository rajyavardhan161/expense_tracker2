<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Expense Statements</title>
    <link rel="stylesheet" href="/view-expense.css" />
  </head>
  <body>
    <div class="main">
      <h2 class="heading">Expense Statements</h2>

      <select class="input-field" id="filterSelect">
        <option value="">All</option>
        <option value="Fuel">Fuel</option>
        <option value="Hotel Bill">Hotel Bill</option>
        <option value="Services">Services</option>
        <option value="Other Expense">Other Expense</option>
      </select>
      <br />

      <table id="expenseTable">
        <thead>
          <tr>
            <th>S.NO</th>
            <th>Date</th>
            <th>Detail</th>
            <th>Amount</th>
          </tr>
        </thead>
        <tbody id="tableBody"></tbody>
      </table>
    </div>

    <script>
      const data = JSON.parse(localStorage.getItem("expensesData")) || [];
      const tableBody = document.getElementById("tableBody");
      const filterSelect = document.getElementById("filterSelect");

      function renderTable(filterValue = "") {
        tableBody.innerHTML = "";

        const filteredData = filterValue
          ? data.filter((exp) => exp.detail === filterValue)
          : data;

        filteredData.forEach((exp, i) => {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${i + 1}</td>
            <td>${exp.date}</td>
            <td>${exp.detail}</td>
            <td>${exp.amount}</td>
          `;
          tableBody.appendChild(row);
        });
      }

      renderTable();
      filterSelect.addEventListener("change", (e) => {
        renderTable(e.target.value);
      });
    </script>
  </body>
</html>
